<%= subscribe_to "/layouts/posts" %>

<div class="top-section">
  <div class="row">
    <div class="top-column-main">
      <div style="width: 100%; position: relative; display; block; padding-left: 20px;">
        <h1>Discussion Board</h1>
        <!-- ***** CREATE POST BUTTON ***** -->
        <div class="button-right">
          <a href="#newPostModal" data-toggle="modal" id="intro-video" data-backdrop="false">
            <div class="circle-button"><p>+</p></div>
          </a>
        </div>
      </div>
    </div><!-- column main -->
  </div><!-- row -->
</div>

<div class="row" style="height: 100%;">
   <div class="column-main"> 
    <div class="headerAlert">
      <div class="alert alert-info">
        <%= link_to "Please refresh this page to receive new updates.", posts_path %>
      </div>      
    </div>


    <!-- ***** SHOW POSTS ***** -->
    <div id="posts-column">
      <div id="postsDiv">
        <%= render @posts %>
      </div>
      <%= paginate @posts %>
    </div>

    <%= subscribe_to "/posts/new" %>
  </div><!-- col-9 -->
  <div class="column-right">
    <div class="col-right-top-section">
      <h3>Leaderboard</h3>
    </div>
  </div>
</div><!-- row -->

<!-- ******  NEW POST MODAL ******* -->
<div id="newPostModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div style="padding: 30px;">
    <button type="button" class="close" style="" data-dismiss="modal" aria-hidden="true">x</button>
    <h1>New Post</h1><br/>
    <%= render 'newpost' %>
  </div>
</div>



<script type="text/javascript">
  $(".headerAlert").hide();

  $( document ).ready(function() { 
    // refresh alert for new posts
    var headerAlert = document.querySelector('.headerAlert');
    var origOffsetY = headerAlert.offsetTop;
    function onScroll(e) {
    window.scrollY >= origOffsetY ? headerAlert.classList.add('sticky') :
      headerAlert.classList.remove('sticky');
    }
    document.addEventListener('scroll', onScroll);   
  });
</script>

